<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BomberZueira NFT - O Jogo dos Memes Brasileiros</title>
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Ethers.js para Web3 -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #fff;
            min-height: 100vh;
        }

        /* Header */
        .navbar {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid #ffd700;
            position: sticky;
            top: 0;
            z-index: 100;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(45deg, #ffd700, #ff4500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .wallet-info {
            background: #2a2a4a;
            padding: 10px 20px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .wallet-btn {
            background: #ffd700;
            border: none;
            color: #1a1a2e;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 20px;
            background: radial-gradient(circle at top, #ffd70020, #1a1a2e);
        }

        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #ffd700;
        }

        .hero p {
            font-size: 18px;
            color: #ccc;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        /* Se√ß√£o de Memes Brasileiros */
        .memes-showcase {
            max-width: 1200px;
            margin: 40px auto;
            padding: 20px;
        }

        .section-title {
            font-size: 36px;
            color: #ffd700;
            text-align: center;
            margin-bottom: 30px;
        }

        .memes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .meme-card {
            background: #0f0f1f;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            border: 2px solid #ffd700;
            transition: 0.2s;
            cursor: pointer;
        }

        .meme-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px #ffd700;
        }

        .meme-emoji {
            font-size: 60px;
            margin-bottom: 10px;
        }

        .meme-name {
            font-weight: 600;
            color: #ffd700;
        }

        .meme-type {
            font-size: 12px;
            color: #ccc;
            margin-top: 5px;
        }

        /* Se√ß√£o do Jogador - NFTs √önicos */
        .player-nft-section {
            background: #0f0f1f;
            border-radius: 30px;
            padding: 30px;
            margin: 40px auto;
            max-width: 1200px;
            border: 3px solid #ffd700;
        }

        .nft-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .generate-btn {
            background: linear-gradient(45deg, #ffd700, #ff4500);
            border: none;
            color: #1a1a2e;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
        }

        .nft-card {
            background: #1a1a2e;
            border-radius: 20px;
            padding: 20px;
            border: 2px solid #ffd700;
            position: relative;
            transition: 0.2s;
        }

        .nft-card.unique {
            border: 3px solid #ff4500;
            box-shadow: 0 0 20px #ff4500;
        }

        .nft-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ff4500;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .nft-emoji {
            font-size: 80px;
            text-align: center;
            margin: 10px 0;
        }

        .nft-name {
            font-size: 20px;
            font-weight: 700;
            color: #ffd700;
            text-align: center;
        }

        .nft-attributes {
            margin: 15px 0;
            padding: 10px;
            background: #0f0f1f;
            border-radius: 10px;
        }

        .attribute {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 14px;
        }

        .attribute span:first-child {
            color: #ccc;
        }

        .attribute span:last-child {
            color: #ffd700;
            font-weight: 600;
        }

        .nft-hash {
            font-size: 10px;
            color: #666;
            text-align: center;
            word-break: break-all;
            margin-top: 10px;
        }

        /* √Årea do Jogo */
        .game-area {
            background: #0f0f1f;
            border-radius: 30px;
            padding: 30px;
            margin: 40px auto;
            max-width: 800px;
            border: 3px solid #ffd700;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(11, 1fr);
            gap: 2px;
            background: #333;
            padding: 2px;
            border-radius: 10px;
            width: fit-content;
            margin: 0 auto;
        }

        .grid-cell {
            width: 40px;
            height: 40px;
            background: #4a4a6a;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            border-radius: 4px;
        }

        .grid-cell.wall {
            background: #6a4a4a;
        }

        .grid-cell.player {
            background: #4a6a4a;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .grid-cell.bomb {
            background: #ff4500;
            animation: bombPulse 0.5s infinite;
        }

        @keyframes bombPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .control-key {
            background: #2a2a4a;
            padding: 10px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Se√ß√£o de Compra */
        .buy-section {
            max-width: 1200px;
            margin: 40px auto;
            padding: 30px;
            background: #0f0f1f;
            border-radius: 30px;
            border: 3px solid #ffd700;
        }

        .treasury-info {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .treasury-address {
            background: #000;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            color: #ffd700;
            word-break: break-all;
        }

        /* Footer */
        .footer {
            background: #0a0a1a;
            padding: 40px;
            text-align: center;
            border-top: 3px solid #ffd700;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">
            <i class="bi bi-lightning-charge-fill"></i> BomberZueira NFT
        </div>
        <div class="wallet-info">
            <span id="walletStatus">Carteira n√£o conectada</span>
            <button class="wallet-btn" id="connectWalletBtn">
                <i class="bi bi-wallet2"></i> Conectar
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <h1>üáßüá∑ O JOGO DOS MEMES BRASILEIROS üáßüá∑</h1>
        <p>Personagens √∫nicos gerados por IA baseados nos maiores memes e figuras pol√≠ticas do Brasil. Cada NFT √© √∫nico e registrado na blockchain!</p>
    </section>

    <!-- Banco de Memes Brasileiros -->
    <section class="memes-showcase">
        <h2 class="section-title">üìö BANCO DE MEMES BRASILEIROS</h2>
        <div class="memes-grid" id="memesGrid">
            <!-- Gerado via JavaScript -->
        </div>
    </section>

    <!-- Se√ß√£o do Jogador - NFTs √önicos -->
    <section class="player-nft-section" id="playerNFTs">
        <div class="nft-header">
            <h2 style="color: #ffd700;">üé¥ SEUS NFTs √öNICOS</h2>
            <button class="generate-btn" onclick="generateUniqueNFT()" id="generateNFTBtn">
                <i class="bi bi-magic"></i> Gerar Novo Personagem (IA)
            </button>
        </div>
        <div class="nft-grid" id="playerNFTGrid">
            <!-- NFTs do jogador aparecem aqui -->
        </div>
    </section>

    <!-- √Årea do Jogo -->
    <section class="game-area">
        <div class="game-header">
            <h3 style="color: #ffd700;">üí£ BOMBERZUEIRA ARENA</h3>
            <div>
                <span id="selectedCharacter">Nenhum personagem selecionado</span>
            </div>
        </div>

        <!-- Grid do Jogo -->
        <div class="game-grid" id="gameGrid"></div>

        <!-- Controles -->
        <div class="controls">
            <div class="control-key"><i class="bi bi-arrow-up"></i> <i class="bi bi-arrow-down"></i> <i class="bi bi-arrow-left"></i> <i class="bi bi-arrow-right"></i> Mover</div>
            <div class="control-key"><i class="bi bi-bomb"></i> Espa√ßo: Bomba</div>
            <div class="control-key"><i class="bi bi-arrow-repeat"></i> 1-9: Selecionar Personagem</div>
        </div>

        <div style="text-align: center; margin-top: 20px; color: #ffd700;" id="gameMessage"></div>
    </section>

    <!-- Se√ß√£o de Compra -->
    <section class="buy-section">
        <h2 class="section-title">üí∞ COMPRAR $ZUEIRA TOKENS</h2>
        
        <div class="treasury-info">
            <p><i class="bi bi-bank2" style="color: #ffd700;"></i> <strong>Tesouraria Oficial (todos os pagamentos):</strong></p>
            <div class="treasury-address">0x52919f000897c8a8b15a1b607ea6024c00db1a</div>
            <p style="margin-top: 10px; font-size: 14px;">Token: 0x50151553b0772b579a7b906f43e21F768d075bE5</p>
            <p style="color: #ffd700; margin-top: 10px;">Aceitamos: Ethereum | Polygon | BNB | PIX</p>
        </div>

        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
            <div class="nft-card">
                <h3>Pacote Iniciante</h3>
                <div style="font-size: 32px; color: #ffd700;">R$ 50</div>
                <div>500 $ZUEIRA</div>
                <button class="generate-btn" style="margin-top: 15px;" onclick="buyTokens(50, 500)">Comprar</button>
            </div>
            <div class="nft-card">
                <h3>Pacote Memeiro</h3>
                <div style="font-size: 32px; color: #ffd700;">R$ 100</div>
                <div>1200 $ZUEIRA</div>
                <button class="generate-btn" style="margin-top: 15px;" onclick="buyTokens(100, 1200)">Comprar</button>
            </div>
            <div class="nft-card">
                <h3>Pacote Zueira</h3>
                <div style="font-size: 32px; color: #ffd700;">R$ 200</div>
                <div>2600 $ZUEIRA</div>
                <button class="generate-btn" style="margin-top: 15px;" onclick="buyTokens(200, 2600)">Comprar</button>
            </div>
        </div>
    </section>

    <footer class="footer">
        <p>¬© 2026 BomberZueira NFT - Cada personagem √© um NFT √∫nico gerado por IA</p>
        <p style="margin-top: 10px; color: #ffd700;">Baseado em memes e figuras da cultura brasileira</p>
    </footer>

    <script>
        // ============================================
        // BANCO DE DADOS DE MEMES BRASILEIROS
        // ============================================
        const MEME_DATABASE = [
            // POL√çTICOS FAMOSOS
            { id: 1, name: "Lula", emoji: "üë®‚Äçüè≠", type: "pol√≠tico", attributes: { power: 8, speed: 5, stamina: 7 } },
            { id: 2, name: "Bolsonaro", emoji: "üë®‚Äç‚úàÔ∏è", type: "pol√≠tico", attributes: { power: 7, speed: 6, stamina: 8 } },
            { id: 3, name: "Ciro Gomes", emoji: "üßî", type: "pol√≠tico", attributes: { power: 6, speed: 7, stamina: 6 } },
            { id: 4, name: "Dilma", emoji: "üë©‚Äçü¶∞", type: "pol√≠tico", attributes: { power: 5, speed: 4, stamina: 9 } },
            { id: 5, name: "Temer", emoji: "üë¥", type: "pol√≠tico", attributes: { power: 4, speed: 3, stamina: 5 } },
            { id: 6, name: "Moro", emoji: "üë®‚Äç‚öñÔ∏è", type: "pol√≠tico", attributes: { power: 6, speed: 8, stamina: 4 } },
            { id: 7, name: "Doria", emoji: "üë®‚Äçüíº", type: "pol√≠tico", attributes: { power: 5, speed: 6, stamina: 5 } },
            
            // MEMES VIRAIS
            { id: 8, name: "Gretchen", emoji: "üë©‚Äçüé§", type: "meme", attributes: { power: 9, speed: 9, stamina: 10 } },
            { id: 9, name: "Nazar√© Tedesco", emoji: "üë©", type: "meme", attributes: { power: 10, speed: 5, stamina: 8 } },
            { id: 10, name: "Craque Neto", emoji: "üßî‚Äç‚ôÇÔ∏è", type: "meme", attributes: { power: 8, speed: 4, stamina: 7 } },
            { id: 11, name: "Pabllo Vittar", emoji: "üë©‚Äçüé§", type: "meme", attributes: { power: 7, speed: 8, stamina: 8 } },
            { id: 12, name: "Whindersson", emoji: "üë®‚Äçü¶±", type: "meme", attributes: { power: 6, speed: 9, stamina: 6 } },
            { id: 13, name: "Luva de Pedreiro", emoji: "üßë", type: "meme", attributes: { power: 5, speed: 10, stamina: 7 } },
            
            // PERSONAGENS FAMOSOS
            { id: 14, name: "Capit√£o Nascimento", emoji: "üëÆ", type: "personagem", attributes: { power: 10, speed: 7, stamina: 9 } },
            { id: 15, name: "Z√© Pequeno", emoji: "üßî‚Äç‚ôÇÔ∏è", type: "personagem", attributes: { power: 9, speed: 6, stamina: 8 } },
            { id: 16, name: "Chaves", emoji: "üßí", type: "personagem", attributes: { power: 3, speed: 5, stamina: 10 } },
            { id: 17, name: "Kiko", emoji: "üë¶", type: "personagem", attributes: { power: 2, speed: 8, stamina: 6 } },
            
            // FIGURAS POL√äMICAS
            { id: 18, name: "Pablo Mar√ßal", emoji: "üë®‚Äçüíª", type: "influencer", attributes: { power: 7, speed: 9, stamina: 8 } },
            { id: 19, name: "Felipe Neto", emoji: "üßî", type: "influencer", attributes: { power: 6, speed: 7, stamina: 7 } },
            { id: 20, name: "Nando Moura", emoji: "üßî‚Äç‚ôÇÔ∏è", type: "influencer", attributes: { power: 8, speed: 6, stamina: 6 } }
        ];

        // ============================================
        // ESTADO DO JOGADOR
        // ============================================
        let playerNFTs = [];
        let selectedNFTIndex = 0;
        let walletAddress = '';
        
        // Elementos DOM
        const memesGrid = document.getElementById('memesGrid');
        const playerNFTGrid = document.getElementById('playerNFTGrid');
        const gameGrid = document.getElementById('gameGrid');
        const gameMessage = document.getElementById('gameMessage');
        const selectedCharSpan = document.getElementById('selectedCharacter');

        // ============================================
        // FUN√á√ÉO DE IA PARA GERAR NFTs √öNICOS
        // ============================================
        function generateUniqueNFT() {
            // Verificar se tem carteira
            if (!walletAddress) {
                alert('Conecte sua carteira primeiro!');
                return;
            }

            // Verificar limite (m√°x 9 NFTs por jogador)
            if (playerNFTs.length >= 9) {
                alert('Voc√™ j√° tem 9 NFTs! Use os n√∫meros 1-9 para selecionar.');
                return;
            }

            // Selecionar meme aleat√≥rio do banco de dados
            const randomMeme = MEME_DATABASE[Math.floor(Math.random() * MEME_DATABASE.length)];
            
            // Gerar hash √∫nico baseado em m√∫ltiplos fatores
            const uniqueHash = generateUniqueHash(randomMeme, playerNFTs.length);
            
            // Gerar atributos √∫nicos com varia√ß√£o de -2 a +2
            const attributes = {
                power: Math.min(10, Math.max(1, randomMeme.attributes.power + Math.floor(Math.random() * 5) - 2)),
                speed: Math.min(10, Math.max(1, randomMeme.attributes.speed + Math.floor(Math.random() * 5) - 2)),
                stamina: Math.min(10, Math.max(1, randomMeme.attributes.stamina + Math.floor(Math.random() * 5) - 2))
            };

            // Criar NFT √∫nico
            const newNFT = {
                id: Date.now() + Math.random(),
                name: randomMeme.name,
                emoji: randomMeme.emoji,
                type: randomMeme.type,
                attributes: attributes,
                hash: uniqueHash,
                rarity: calculateRarity(attributes),
                mintedAt: new Date().toISOString(),
                owner: walletAddress
            };

            playerNFTs.push(newNFT);
            renderPlayerNFTs();
            updateGameMessage(`üéâ Novo NFT gerado: ${newNFT.name} (${newNFT.rarity})`);
        }

        // Gerar hash √∫nico (simula√ß√£o de blockchain)
        function generateUniqueHash(meme, index) {
            const timestamp = Date.now();
            const random = Math.random();
            const walletPart = walletAddress ? walletAddress.slice(2, 10) : '00000000';
            const data = `${meme.id}-${index}-${timestamp}-${random}-${walletPart}`;
            
            // Simula√ß√£o de hash SHA-256 (simplificado)
            let hash = '0x';
            for (let i = 0; i < 40; i++) {
                hash += Math.floor(Math.random() * 16).toString(16);
            }
            return hash;
        }

        // Calcular raridade baseado nos atributos
        function calculateRarity(attributes) {
            const total = attributes.power + attributes.speed + attributes.stamina;
            if (total >= 27) return 'LEND√ÅRIO üî•';
            if (total >= 24) return '√âpico ‚≠ê';
            if (total >= 21) return 'Raro ‚ú®';
            return 'Comum üì¶';
        }

        // ============================================
        // RENDERIZA√á√ÉO
        // ============================================
        function renderMemesGrid() {
            memesGrid.innerHTML = MEME_DATABASE.map(meme => `
                <div class="meme-card">
                    <div class="meme-emoji">${meme.emoji}</div>
                    <div class="meme-name">${meme.name}</div>
                    <div class="meme-type">${meme.type}</div>
                    <div style="font-size: 12px; margin-top: 5px;">
                        ‚ö°${meme.attributes.power} üèÉ${meme.attributes.speed} üí™${meme.attributes.stamina}
                    </div>
                </div>
            `).join('');
        }

        function renderPlayerNFTs() {
            if (playerNFTs.length === 0) {
                playerNFTGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">
                        <i class="bi bi-magic" style="font-size: 48px;"></i>
                        <p>Clique em "Gerar Novo Personagem" para criar seu primeiro NFT √∫nico!</p>
                    </div>
                `;
                selectedCharSpan.innerHTML = 'Nenhum personagem selecionado';
                return;
            }

            playerNFTGrid.innerHTML = playerNFTs.map((nft, index) => `
                <div class="nft-card ${index === selectedNFTIndex ? 'unique' : ''}" onclick="selectNFT(${index})">
                    <div class="nft-badge">#${index + 1}</div>
                    <div class="nft-emoji">${nft.emoji}</div>
                    <div class="nft-name">${nft.name}</div>
                    <div class="nft-type">${nft.type} | ${nft.rarity}</div>
                    <div class="nft-attributes">
                        <div class="attribute"><span>‚ö° Poder</span><span>${nft.attributes.power}/10</span></div>
                        <div class="attribute"><span>üèÉ Velocidade</span><span>${nft.attributes.speed}/10</span></div>
                        <div class="attribute"><span>üí™ Stamina</span><span>${nft.attributes.stamina}/10</span></div>
                    </div>
                    <div class="nft-hash">${nft.hash.slice(0, 20)}...</div>
                </div>
            `).join('');

            selectedCharSpan.innerHTML = `Jogando com: ${playerNFTs[selectedNFTIndex]?.name || 'Nenhum'}`;
        }

        function selectNFT(index) {
            if (index >= 0 && index < playerNFTs.length) {
                selectedNFTIndex = index;
                renderPlayerNFTs();
                updateGameMessage(`‚úÖ Personagem selecionado: ${playerNFTs[index].name}`);
            }
        }

        // ============================================
        // JOGO BOMBERMAN
        // ============================================
        let gameState = {
            playerX: 1,
            playerY: 1,
            grid: []
        };

        function initGame() {
            // Criar grid 11x11
            for (let y = 0; y < 11; y++) {
                gameState.grid[y] = [];
                for (let x = 0; x < 11; x++) {
                    if (x === 0 || y === 0 || x === 10 || y === 10 || (x % 2 === 0 && y % 2 === 0)) {
                        gameState.grid[y][x] = 'wall';
                    } else {
                        gameState.grid[y][x] = 'empty';
                    }
                }
            }
            gameState.grid[1][1] = 'player';
            renderGame();
        }

        function renderGame() {
            gameGrid.innerHTML = '';
            for (let y = 0; y < 11; y++) {
                for (let x = 0; x < 11; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    
                    if (gameState.grid[y][x] === 'wall') {
                        cell.classList.add('wall');
                        cell.textContent = 'üß±';
                    } else if (gameState.grid[y][x] === 'player') {
                        cell.classList.add('player');
                        if (playerNFTs[selectedNFTIndex]) {
                            cell.textContent = playerNFTs[selectedNFTIndex].emoji;
                        } else {
                            cell.textContent = 'üë§';
                        }
                    } else if (gameState.grid[y][x] === 'bomb') {
                        cell.classList.add('bomb');
                        cell.textContent = 'üí£';
                    }
                    
                    gameGrid.appendChild(cell);
                }
            }
        }

        function movePlayer(dx, dy) {
            const newX = gameState.playerX + dx;
            const newY = gameState.playerY + dy;
            
            if (newX < 0 || newX >= 11 || newY < 0 || newY >= 11) return;
            
            if (gameState.grid[newY][newX] === 'empty') {
                gameState.grid[gameState.playerY][gameState.playerX] = 'empty';
                gameState.playerX = newX;
                gameState.playerY = newY;
                gameState.grid[newY][newX] = 'player';
                renderGame();
            }
        }

        function plantBomb() {
            const x = gameState.playerX;
            const y = gameState.playerY;
            
            gameState.grid[y][x] = 'bomb';
            renderGame();
            
            setTimeout(() => {
                // Explos√£o em cruz
                const directions = [[0,0], [1,0], [-1,0], [0,1], [0,-1]];
                directions.forEach(([dx, dy]) => {
                    const nx = x + dx;
                    const ny = y + dy;
                    if (nx >= 0 && nx < 11 && ny >= 0 && ny < 11) {
                        if (gameState.grid[ny][nx] === 'wall' && !(nx === 0 || ny === 0 || nx === 10 || ny === 10)) {
                            gameState.grid[ny][nx] = 'empty';
                        }
                        if (gameState.grid[ny][nx] === 'bomb') {
                            gameState.grid[ny][nx] = 'empty';
                        }
                    }
                });
                gameState.grid[y][x] = 'empty';
                renderGame();
                updateGameMessage('üí• BUM! Explodiu!');
            }, 2000);
        }

        // ============================================
        // CONTROLES DO TECLADO
        // ============================================
        document.addEventListener('keydown', (e) => {
            // Movimento
            if (e.key === 'ArrowUp') movePlayer(0, -1);
            if (e.key === 'ArrowDown') movePlayer(0, 1);
            if (e.key === 'ArrowLeft') movePlayer(-1, 0);
            if (e.key === 'ArrowRight') movePlayer(1, 0);
            
            // Bomba
            if (e.key === ' ') {
                plantBomb();
                e.preventDefault();
            }
            
            // Selecionar NFTs (1-9)
            if (e.key >= '1' && e.key <= '9') {
                const index = parseInt(e.key) - 1;
                if (index < playerNFTs.length) {
                    selectNFT(index);
                }
            }
        });

        // ============================================
        // FUN√á√ïES DE UTILIDADE
        // ============================================
        function updateGameMessage(msg) {
            gameMessage.textContent = msg;
        }

        // ============================================
        // CONEX√ÉO COM WALLET
        // ============================================
        document.getElementById('connectWalletBtn').addEventListener('click', async () => {
            if (!window.ethereum) {
                alert('Instale a MetaMask!');
                window.open('https://metamask.io');
                return;
            }

            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                walletAddress = accounts[0];
                document.getElementById('walletStatus').innerHTML = 
                    `Conectado: ${walletAddress.slice(0,6)}...${walletAddress.slice(-4)}`;
                updateGameMessage('‚úÖ Carteira conectada! Agora voc√™ pode gerar NFTs √∫nicos!');
            } catch (error) {
                alert('Erro ao conectar');
            }
        });

        // ============================================
        // FUN√á√ÉO DE COMPRA
        // ============================================
        window.buyTokens = (price, tokens) => {
            alert(`üí∞ COMPRA DE TOKENS\n\nValor: R$ ${price}\nTokens: ${tokens} $ZUEIRA\n\nEnvie para:\n0x52919f000897c8a8b15a1b607ea6024c00db1a\n\nAp√≥s o pagamento, os tokens ser√£o creditados.`);
        };

        // ============================================
        // INICIALIZA√á√ÉO
        // ============================================
        renderMemesGrid();
        initGame();

        // Adicionar NFT inicial para demonstra√ß√£o
        setTimeout(() => {
            if (playerNFTs.length === 0) {
                // Simular primeiro NFT
                walletAddress = '0x' + 'f'.repeat(40);
                generateUniqueNFT();
            }
        }, 1000);
    </script>
</body>
</html>